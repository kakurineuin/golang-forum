{"version":3,"sources":["assets/logo.png","components/spinner/spinner.module.css","utils/history.js","modules/auth.js","pages/Register.js","pages/Login.js","components/ForumStatistics.js","pages/Home.js","components/PostEditor.js","components/Pagination.js","pages/Topics.js","pages/Topic.js","pages/Admin.js","modules/message.js","components/spinner/Spinner.js","App.js","serviceWorker.js","modules/load.js","store.js","index.js"],"names":["module","exports","LdsRoller","createBrowserHistory","AUTH_SUCCESS","AUTH_LOGOUT","authSuccess","user","localStorage","setItem","JSON","stringify","type","logout","clear","history","replace","buildUser","response","data","userProfile","expDate","Date","exp","console","log","format","token","Register","state","username","email","password","event","this","setState","target","value","key","registerHandler","preventDefault","props","onRegister","_this2","react_default","a","createElement","es_Redirect","to","className","placeholder","onChange","usernameChangeHandler","emailChangeHandler","passwordChangeHandler","onKeyPress","passwordKeyPressHandler","onClick","Component","connect","auth","dispatch","axios","post","then","authActions","Login","loginHandler","onLogin","ForumStatistics","topicCount","replyCount","userCount","get","forumStatistics","produce","draft","Home","golang","totalCount","lastPostUsername","lastPostTime","nodeJS","golangLastPost","dateFns","nodeJSLastPost","Link","pathname","title","components_ForumStatistics","PostEditor","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","quillRef","React","createRef","modules","toolbar","container","header","list","indent","handlers","image","callback","range","current","getEditor","getSelection","prompt","insertEmbed","index","formats","changed","style","marginBottom","lib_default","assign","ref","theme","changeHandler","Pagination","currentPage","limit","findData","getOffset","page","_this3","maxPage","Math","ceil","pages","push","aria-label","aria-current","pageClickHandler","_loop","i","concat","max","min","role","disabled","Topics","topic","content","topics","inputSearchTopic","searchTopic","paginationKey","random","match","params","category","userProfileId","id","searchHandler","offset","_this4","createTopic","topicChangeHandler","components_PostEditor","contentChangeHandler","createTopicHandler","map","lastReply","lastReplyUsername","lastReplyCreatedAt","createdAt","tagSearchTopic","deleteTagHandler","location","inputSearchTopicChangeHandler","inputSearchTopicKeyPressHandler","components_Pagination","findPostsTopics","Topic","posts","postOnUpdate","updatePostModalActivate","postOnDelete","deletePostModalActivate","replyPostId","parseInt","postId","put","updatedPost","findIndex","delete","deletedPost","_this5","goBack","_this6","createReply","createReplyHandler","updateButton","deleteButton","deletedAt","openUpdatePostModal","openDeletePostModal","postContent","dangerouslySetInnerHTML","__html","updatedAt","width","findPostsByTopicId","goBackHandler","closeUpdatePostModal","postOnUpdateChangeHandler","updatePostHandler","closeDeletePostModal","deletePostHandler","Admin","users","inputSearchUser","searchUser","disableUserModalActivate","disableUserId","closeDisableUserModal","isDisabled","openDisableUserModal","tagSearchUser","inputSearchUserChangeHandler","inputSearchUserKeyPressHandler","findUsers","disableUserHandler","SHOW","DELETE","showMessage","isError","text","message","Spinner","loading","height","classes","load","App","onTryAutoLogin","onDeleteMessage","onLogout","notifications","messageList","length","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","join","deleteMessageHandler","_iterator","Symbol","iterator","next","done","err","return","buttons","logoutHandler","spinner_Spinner","alt","src","logo","maxHeight","Switch","Route","path","component","exact","Redirect","withRouter","parse","getItem","messageActions","Boolean","window","hostname","START","STOP","stopLoad","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","rootReducer","combineReducers","arguments","action","ajaxCount","_","remove","store","createStore","applyMiddleware","thunk","interceptors","request","use","config","headers","Authorization","error","now","toString","Promise","reject","status","app","react_redux_es","Router","src_App_0","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.8d38cc85.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LdsRoller\":\"spinner_LdsRoller__2l220\"};","import { createBrowserHistory } from \"history\";\r\n\r\nexport default createBrowserHistory({\r\n  /* pass a configuration object here if needed */\r\n});\r\n","import produce from \"immer\";\r\nimport axios from \"axios\";\r\nimport format from \"date-fns/format\";\r\nimport history from \"../utils/history\";\r\n\r\n// Action Types\r\nexport const AUTH_SUCCESS = \"forum/auth/AUTH_SUCCESS\";\r\nexport const AUTH_LOGOUT = \"forum/auth/AUTH_LOGOUT\";\r\n\r\n// Reducer\r\nexport default function reducer(state = {}, action = {}) {\r\n  console.log(\"action in reducer\", action);\r\n\r\n  return produce(state, draft => {\r\n    switch (action.type) {\r\n      case AUTH_SUCCESS:\r\n        draft.user = action.user;\r\n        break;\r\n      case AUTH_LOGOUT:\r\n        delete draft.user;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  });\r\n}\r\n\r\n// Action Creators\r\nexport function authSuccess(user) {\r\n  localStorage.setItem(\"user\", JSON.stringify(user));\r\n  return {\r\n    type: AUTH_SUCCESS,\r\n    user\r\n  };\r\n}\r\n\r\nexport function register(username, email, password) {\r\n  return dispatch => {\r\n    axios\r\n      .post(\"/api/auth/register\", { username, email, password })\r\n      .then(response => {\r\n        dispatch(authSuccess(buildUser(response)));\r\n      });\r\n  };\r\n}\r\n\r\nexport function login(email, password) {\r\n  return dispatch => {\r\n    axios.post(\"/api/auth/login\", { email, password }).then(response => {\r\n      dispatch(authSuccess(buildUser(response)));\r\n    });\r\n  };\r\n}\r\n\r\nexport function logout() {\r\n  localStorage.clear();\r\n  history.replace(\"/\");\r\n  return {\r\n    type: AUTH_LOGOUT\r\n  };\r\n}\r\n\r\nexport function authCheckState() {\r\n  return dispatch => {\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n    if (!user || user.expDate <= new Date()) {\r\n      dispatch(logout());\r\n    } else {\r\n      dispatch(authSuccess(user));\r\n    }\r\n  };\r\n}\r\n\r\nfunction buildUser(response) {\r\n  const user = response.data.userProfile;\r\n  user.expDate = new Date(response.data.exp * 1000);\r\n  console.log(\"expDate\", format(user.expDate, \"YYYY/MM/DD HH:mm:ss\"));\r\n  user.token = response.data.token;\r\n  return user;\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router\";\r\nimport { connect } from \"react-redux\";\r\nimport * as authActions from \"../modules/auth\";\r\n\r\n/**\r\n  註冊頁面。\r\n*/\r\nclass Register extends Component {\r\n  state = {\r\n    username: \"\",\r\n    email: \"\",\r\n    password: \"\"\r\n  };\r\n\r\n  usernameChangeHandler(event) {\r\n    this.setState({\r\n      username: event.target.value\r\n    });\r\n  }\r\n\r\n  emailChangeHandler(event) {\r\n    this.setState({\r\n      email: event.target.value\r\n    });\r\n  }\r\n\r\n  passwordChangeHandler(event) {\r\n    this.setState({\r\n      password: event.target.value\r\n    });\r\n  }\r\n\r\n  passwordKeyPressHandler(event) {\r\n    if (event.key !== \"Enter\") return;\r\n    this.registerHandler(event);\r\n  }\r\n\r\n  registerHandler(event) {\r\n    event.preventDefault();\r\n    this.props.onRegister(\r\n      this.state.username,\r\n      this.state.email,\r\n      this.state.password\r\n    );\r\n  }\r\n\r\n  render() {\r\n    if (this.props.user) return <Redirect to=\"/\" />;\r\n\r\n    return (\r\n      <div className=\"columns\">\r\n        <div className=\"column is-4\" />\r\n        <div className=\"column is-4\">\r\n          <div className=\"field\">\r\n            <label className=\"label\">使用者名稱</label>\r\n            <p className=\"control has-icons-left\">\r\n              <input\r\n                className=\"input\"\r\n                type=\"text\"\r\n                placeholder=\"使用者名稱\"\r\n                value={this.state.username}\r\n                onChange={event => this.usernameChangeHandler(event)}\r\n              />\r\n              <span className=\"icon is-small is-left\">\r\n                <i className=\"fas fas fa-user\" />\r\n              </span>\r\n            </p>\r\n          </div>\r\n          <div className=\"field\">\r\n            <label className=\"label\">Email</label>\r\n            <p className=\"control has-icons-left\">\r\n              <input\r\n                className=\"input\"\r\n                type=\"email\"\r\n                placeholder=\"Email\"\r\n                value={this.state.email}\r\n                onChange={event => this.emailChangeHandler(event)}\r\n              />\r\n              <span className=\"icon is-small is-left\">\r\n                <i className=\"fas fa-envelope\" />\r\n              </span>\r\n            </p>\r\n          </div>\r\n          <div className=\"field\">\r\n            <label className=\"label\">密碼</label>\r\n            <p className=\"control has-icons-left\">\r\n              <input\r\n                className=\"input\"\r\n                type=\"password\"\r\n                placeholder=\"密碼\"\r\n                value={this.state.password}\r\n                onChange={event => this.passwordChangeHandler(event)}\r\n                onKeyPress={event => this.passwordKeyPressHandler(event)}\r\n              />\r\n              <span className=\"icon is-small is-left\">\r\n                <i className=\"fas fa-lock\" />\r\n              </span>\r\n            </p>\r\n          </div>\r\n          <div className=\"field\">\r\n            <p className=\"control\">\r\n              <button\r\n                className=\"button is-success\"\r\n                onClick={event => this.registerHandler(event)}\r\n              >\r\n                註冊\r\n              </button>\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"column is-4\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    user: state.auth.user\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onRegister: (username, email, password) =>\r\n      dispatch(authActions.register(username, email, password))\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Register);\r\n","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router\";\r\nimport { connect } from \"react-redux\";\r\nimport * as authActions from \"../modules/auth\";\r\n\r\n/**\r\n  登入頁面。\r\n*/\r\nclass Login extends Component {\r\n  state = {\r\n    email: \"\",\r\n    password: \"\"\r\n  };\r\n\r\n  emailChangeHandler(event) {\r\n    this.setState({\r\n      email: event.target.value\r\n    });\r\n  }\r\n\r\n  passwordChangeHandler(event) {\r\n    this.setState({\r\n      password: event.target.value\r\n    });\r\n  }\r\n\r\n  passwordKeyPressHandler(event) {\r\n    if (event.key !== \"Enter\") return;\r\n    this.loginHandler(event);\r\n  }\r\n\r\n  loginHandler(event) {\r\n    event.preventDefault();\r\n    this.props.onLogin(this.state.email, this.state.password);\r\n  }\r\n\r\n  render() {\r\n    if (this.props.user) return <Redirect to=\"/\" />;\r\n\r\n    return (\r\n      <div className=\"columns\">\r\n        <div className=\"column is-4\" />\r\n        <div className=\"column is-4\">\r\n          <div className=\"field\">\r\n            <label className=\"label\">Email</label>\r\n            <p className=\"control has-icons-left\">\r\n              <input\r\n                className=\"input\"\r\n                type=\"email\"\r\n                placeholder=\"Email\"\r\n                value={this.state.email}\r\n                onChange={event => this.emailChangeHandler(event)}\r\n              />\r\n              <span className=\"icon is-small is-left\">\r\n                <i className=\"fas fa-envelope\" />\r\n              </span>\r\n            </p>\r\n          </div>\r\n          <div className=\"field\">\r\n            <label className=\"label\">密碼</label>\r\n            <p className=\"control has-icons-left\">\r\n              <input\r\n                className=\"input\"\r\n                type=\"password\"\r\n                placeholder=\"密碼\"\r\n                value={this.state.password}\r\n                onChange={event => this.passwordChangeHandler(event)}\r\n                onKeyPress={event => this.passwordKeyPressHandler(event)}\r\n              />\r\n              <span className=\"icon is-small is-left\">\r\n                <i className=\"fas fa-lock\" />\r\n              </span>\r\n            </p>\r\n          </div>\r\n          <div className=\"field\">\r\n            <p className=\"control\">\r\n              <button\r\n                className=\"button is-success\"\r\n                onClick={event => this.loginHandler(event)}\r\n              >\r\n                登入\r\n              </button>\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"column is-4\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    user: state.auth.user\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onLogin: (email, password) => dispatch(authActions.login(email, password))\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Login);\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport produce from \"immer\";\r\n\r\n/**\r\n * 論壇統計資料。\r\n */\r\nclass ForumStatistics extends Component {\r\n  state = {\r\n    topicCount: 0, // 主題總數。\r\n    replyCount: 0, // 回覆總數。\r\n    userCount: 0 // 使用者總數。\r\n  };\r\n\r\n  componentDidMount() {\r\n    axios.get(\"/api/forum/statistics\").then(response => {\r\n      const forumStatistics = response.data.forumStatistics;\r\n      this.setState(\r\n        produce(draft => {\r\n          draft.topicCount = forumStatistics.topicCount;\r\n          draft.replyCount = forumStatistics.replyCount;\r\n          draft.userCount = forumStatistics.userCount;\r\n        })\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"card\">\r\n        <header className=\"card-header\">\r\n          <p className=\"card-header-title\">論壇統計資料</p>\r\n        </header>\r\n        <div className=\"card-content\">\r\n          <div className=\"level\">\r\n            <div className=\"level-item has-text-centered\">\r\n              <div>\r\n                <p className=\"heading\">主題總數</p>\r\n                <p className=\"title\">{this.state.topicCount}</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"level-item has-text-centered\">\r\n              <div>\r\n                <p className=\"heading\">回覆總數</p>\r\n                <p className=\"title\">{this.state.replyCount}</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"level-item has-text-centered\">\r\n              <div>\r\n                <p className=\"heading\">使用者總數</p>\r\n                <p className=\"title\">{this.state.userCount}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ForumStatistics;\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport dateFns from \"date-fns\";\r\nimport axios from \"axios\";\r\nimport produce from \"immer\";\r\nimport ForumStatistics from \"../components/ForumStatistics\";\r\n\r\n/**\r\n  首頁。\r\n*/\r\nclass Home extends Component {\r\n  state = {\r\n    golang: {\r\n      totalCount: 0,\r\n      replyCount: 0,\r\n      lastPostUsername: null,\r\n      lastPostTime: null\r\n    },\r\n    nodeJS: {\r\n      totalCount: 0,\r\n      replyCount: 0,\r\n      lastPostUsername: null,\r\n      lastPostTime: null\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    axios.get(\"/api/topics/statistics\").then(response => {\r\n      this.setState(\r\n        produce(draft => {\r\n          draft.golang = response.data.golang;\r\n          draft.nodeJS = response.data.nodeJS;\r\n        })\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const golang = this.state.golang;\r\n    let golangLastPost = null;\r\n\r\n    if (golang.lastPostTime) {\r\n      golangLastPost = (\r\n        <div>\r\n          {dateFns.format(new Date(golang.lastPostTime), \"YYYY/MM/DD HH:mm:ss\")}\r\n          <br />\r\n          {golang.lastPostUsername}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const nodeJS = this.state.nodeJS;\r\n    let nodeJSLastPost = null;\r\n\r\n    if (nodeJS.lastPostTime) {\r\n      nodeJSLastPost = (\r\n        <div>\r\n          {dateFns.format(new Date(nodeJS.lastPostTime), \"YYYY/MM/DD HH:mm:ss\")}\r\n          <br />\r\n          {nodeJS.lastPostUsername}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"columns\">\r\n        <div className=\"column is-9\">\r\n          <table className=\"table is-bordered is-striped is-hoverable is-fullwidth\">\r\n            <thead>\r\n              <tr>\r\n                <th>分類</th>\r\n                <th>主題數</th>\r\n                <th>回覆數</th>\r\n                <th>最新發文</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr>\r\n                <td>\r\n                  <Link\r\n                    to={{\r\n                      pathname: \"/topics/golang\",\r\n                      state: { title: \"Golang\" }\r\n                    }}\r\n                  >\r\n                    Golang\r\n                  </Link>\r\n                </td>\r\n                <td>{golang.topicCount}</td>\r\n                <td>{golang.replyCount}</td>\r\n                <td>{golangLastPost}</td>\r\n              </tr>\r\n              <tr>\r\n                <td>\r\n                  <Link\r\n                    to={{\r\n                      pathname: \"/topics/nodejs\",\r\n                      state: { title: \"Node.js\" }\r\n                    }}\r\n                  >\r\n                    Node.js\r\n                  </Link>\r\n                </td>\r\n                <td>{nodeJS.topicCount}</td>\r\n                <td>{nodeJS.replyCount}</td>\r\n                <td>{nodeJSLastPost}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"column is-3\">\r\n          <ForumStatistics />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Home;\r\n","import React, { Component } from \"react\";\r\nimport ReactQuill from \"react-quill\";\r\nimport \"react-quill/dist/quill.snow.css\";\r\n\r\n/**\r\n  文章編輯器元件。\r\n*/\r\nclass PostEditor extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.quillRef = React.createRef();\r\n    this.modules = {\r\n      toolbar: {\r\n        container: [\r\n          [{ header: [1, 2, false] }],\r\n          [\"bold\", \"italic\", \"underline\", \"strike\", \"blockquote\", \"code-block\"],\r\n          [\r\n            { list: \"ordered\" },\r\n            { list: \"bullet\" },\r\n            { indent: \"-1\" },\r\n            { indent: \"+1\" }\r\n          ],\r\n          [\"image\"],\r\n          [\"clean\"]\r\n        ],\r\n        handlers: {\r\n          image: (image, callback) => {\r\n            var range = this.quillRef.current.getEditor().getSelection();\r\n            var value = prompt(\"請輸入圖片網址。\");\r\n            if (value) {\r\n              this.quillRef.current\r\n                .getEditor()\r\n                .insertEmbed(range.index, \"image\", value, \"user\");\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n    this.formats = [\r\n      \"header\",\r\n      \"bold\",\r\n      \"italic\",\r\n      \"underline\",\r\n      \"strike\",\r\n      \"blockquote\",\r\n      \"code-block\",\r\n      \"list\",\r\n      \"bullet\",\r\n      \"indent\",\r\n      \"image\"\r\n    ];\r\n  }\r\n\r\n  changeHandler(value) {\r\n    this.props.changed(value);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{ marginBottom: \"10px\" }}>\r\n        <ReactQuill\r\n          {...this.props}\r\n          ref={this.quillRef}\r\n          theme=\"snow\"\r\n          value={this.props.value}\r\n          modules={this.modules}\r\n          formats={this.formats}\r\n          onChange={value => this.changeHandler(value)}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PostEditor;\r\n","import React, { Component } from \"react\";\r\nimport produce from \"immer\";\r\n\r\n/**\r\n  分頁元件。\r\n*/\r\nclass Pagination extends Component {\r\n  state = {\r\n    currentPage: 1, // 當前頁數。\r\n    limit: 10 // 每頁筆數。\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.props.findData(this.getOffset(), this.state.limit);\r\n  }\r\n\r\n  getOffset() {\r\n    return (this.state.currentPage - 1) * this.state.limit;\r\n  }\r\n\r\n  pageClickHandler(page) {\r\n    this.setState(\r\n      produce(draft => {\r\n        draft.currentPage = page;\r\n      }),\r\n      () => {\r\n        this.props.findData(this.getOffset(), this.state.limit);\r\n      }\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const currentPage = this.state.currentPage; // 當前頁數。\r\n    const totalCount = this.props.totalCount; // 總筆數。\r\n    const maxPage = Math.ceil(totalCount / this.state.limit) || 1; // 最大頁數。\r\n    console.log(\r\n      \"currentPage: {}, totalCount: {}, maxPage: {}\",\r\n      currentPage,\r\n      totalCount,\r\n      maxPage\r\n    );\r\n\r\n    const pages = [];\r\n\r\n    // 第一頁。\r\n    if (currentPage === 1) {\r\n      pages.push(\r\n        <li key={1}>\r\n          <a\r\n            className=\"pagination-link is-current\"\r\n            aria-label=\"Page 1\"\r\n            aria-current=\"page\"\r\n            onClick={() => this.pageClickHandler(1)}\r\n          >\r\n            1\r\n          </a>\r\n        </li>\r\n      );\r\n    } else {\r\n      pages.push(\r\n        <li key={1}>\r\n          <a\r\n            className=\"pagination-link\"\r\n            aria-label=\"Goto page 1\"\r\n            onClick={() => this.pageClickHandler(1)}\r\n          >\r\n            1\r\n          </a>\r\n        </li>\r\n      );\r\n    }\r\n\r\n    // 顯示省略符號。\r\n    if (currentPage - 3 > 1) {\r\n      pages.push(\r\n        <li key={\"ellipsis1\"}>\r\n          <span className=\"pagination-ellipsis\">&hellip;</span>\r\n        </li>\r\n      );\r\n    }\r\n\r\n    // 顯示當前頁的前兩頁和後兩頁。\r\n    for (\r\n      let i = Math.max(currentPage - 2, 2);\r\n      i <= Math.min(currentPage + 2, maxPage);\r\n      i++\r\n    ) {\r\n      if (i === currentPage) {\r\n        pages.push(\r\n          <li key={i}>\r\n            <a\r\n              className=\"pagination-link is-current\"\r\n              aria-label={`Page ${i}`}\r\n              aria-current=\"page\"\r\n              onClick={() => this.pageClickHandler(i)}\r\n            >\r\n              {i}\r\n            </a>\r\n          </li>\r\n        );\r\n        continue;\r\n      }\r\n\r\n      pages.push(\r\n        <li key={i}>\r\n          <a\r\n            className=\"pagination-link\"\r\n            aria-label={`Goto page ${i}`}\r\n            onClick={() => this.pageClickHandler(i)}\r\n          >\r\n            {i}\r\n          </a>\r\n        </li>\r\n      );\r\n    }\r\n\r\n    // 顯示省略符號。\r\n    if (currentPage + 3 < maxPage) {\r\n      pages.push(\r\n        <li key={\"ellipsis2\"}>\r\n          <span className=\"pagination-ellipsis\">&hellip;</span>\r\n        </li>\r\n      );\r\n    }\r\n\r\n    // 最後一頁。\r\n    if (currentPage + 2 < maxPage) {\r\n      pages.push(\r\n        <li key={maxPage}>\r\n          <a\r\n            className=\"pagination-link\"\r\n            aria-label={`Goto page ${maxPage}`}\r\n            onClick={() => this.pageClickHandler(maxPage)}\r\n          >\r\n            {maxPage}\r\n          </a>\r\n        </li>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <nav className=\"pagination\" role=\"navigation\" aria-label=\"pagination\">\r\n        <button\r\n          className=\"button pagination-previous\"\r\n          disabled={currentPage === 1}\r\n          onClick={() => this.pageClickHandler(currentPage - 1)}\r\n        >\r\n          上一頁\r\n        </button>\r\n        <button\r\n          className=\"button pagination-next\"\r\n          disabled={currentPage === maxPage}\r\n          onClick={() => this.pageClickHandler(currentPage + 1)}\r\n        >\r\n          下一頁\r\n        </button>\r\n        <ul className=\"pagination-list\">{pages}</ul>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Pagination;\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PostEditor from \"../components/PostEditor\";\r\nimport Pagination from \"../components/Pagination\";\r\nimport { connect } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport produce from \"immer\";\r\nimport dateFns from \"date-fns\";\r\n\r\n/**\r\n  主題列表頁面。\r\n*/\r\nclass Topics extends Component {\r\n  state = {\r\n    topic: \"\", // 新增文章的主題。\r\n    content: \"\", // 新增文章的內文。\r\n    topics: [], // 主題列表。\r\n    totalCount: 0, // 主題總筆數。\r\n    inputSearchTopic: \"\", // 搜尋輸入框輸入的值。\r\n    searchTopic: \"\", // 請求參數：搜尋的主題。\r\n    paginationKey: Math.random() // 用來觸發分頁重新 render 並查詢資料。\r\n  };\r\n\r\n  topicChangeHandler(event) {\r\n    const value = event.target.value;\r\n    this.setState(\r\n      produce(draft => {\r\n        draft.topic = value;\r\n      })\r\n    );\r\n  }\r\n\r\n  contentChangeHandler(value) {\r\n    this.setState(\r\n      produce(draft => {\r\n        draft.content = value;\r\n      })\r\n    );\r\n  }\r\n\r\n  createTopicHandler() {\r\n    axios\r\n      .post(`/api/topics/${this.props.match.params.category}`, {\r\n        userProfileId: this.props.user.id,\r\n        topic: this.state.topic,\r\n        content: this.state.content\r\n      })\r\n      .then(response => {\r\n        this.setState(\r\n          produce(draft => {\r\n            draft.topic = \"\";\r\n            draft.content = \"\";\r\n            draft.inputSearchTopic = \"\";\r\n            draft.searchTopic = \"\";\r\n            draft.paginationKey = Math.random(); // 觸發分頁重新查詢。\r\n          })\r\n        );\r\n      });\r\n  }\r\n\r\n  inputSearchTopicChangeHandler(value) {\r\n    this.setState(\r\n      produce(draft => {\r\n        draft.inputSearchTopic = value;\r\n      })\r\n    );\r\n  }\r\n\r\n  inputSearchTopicKeyPressHandler(event) {\r\n    if (event.key !== \"Enter\") return;\r\n    this.searchHandler();\r\n  }\r\n\r\n  searchHandler() {\r\n    this.setState(\r\n      produce(draft => {\r\n        draft.searchTopic = draft.inputSearchTopic;\r\n        draft.inputSearchTopic = \"\";\r\n        draft.paginationKey = Math.random(); // 觸發分頁重新查詢。\r\n      })\r\n    );\r\n  }\r\n\r\n  deleteTagHandler() {\r\n    this.setState(\r\n      produce(draft => {\r\n        draft.searchTopic = \"\";\r\n        draft.paginationKey = Math.random(); // 觸發分頁重新查詢。\r\n      })\r\n    );\r\n  }\r\n\r\n  findPostsTopics(offset, limit) {\r\n    axios\r\n      .get(`/api/topics/${this.props.match.params.category}`, {\r\n        params: {\r\n          searchTopic: this.state.searchTopic,\r\n          offset,\r\n          limit\r\n        }\r\n      })\r\n      .then(response => {\r\n        this.setState(\r\n          produce(draft => {\r\n            draft.topics = response.data.topics;\r\n            draft.totalCount = response.data.totalCount;\r\n          })\r\n        );\r\n      });\r\n  }\r\n\r\n  render() {\r\n    let createTopic = null;\r\n\r\n    if (this.props.user) {\r\n      createTopic = (\r\n        <div className=\"box\">\r\n          <div className=\"field\">\r\n            <label className=\"label\">主題</label>\r\n            <div className=\"control\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"input\"\r\n                placeholder=\"請輸入主題\"\r\n                value={this.state.topic}\r\n                onChange={event => this.topicChangeHandler(event)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"field\">\r\n            <label className=\"label\">內文</label>\r\n            <div className=\"control\">\r\n              <PostEditor\r\n                value={this.state.content}\r\n                changed={value => this.contentChangeHandler(value)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"field\">\r\n            <div className=\"control\">\r\n              <button\r\n                className=\"button is-primary\"\r\n                onClick={event => this.createTopicHandler()}\r\n              >\r\n                新增主題\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const topics = this.state.topics.map((post, index) => {\r\n      let lastReply = <td />;\r\n\r\n      if (post.lastReplyUsername) {\r\n        lastReply = (\r\n          <td>\r\n            {dateFns.format(\r\n              new Date(post.lastReplyCreatedAt),\r\n              \"YYYY/MM/DD HH:mm:ss\"\r\n            )}\r\n            <br />\r\n            {post.lastReplyUsername}\r\n          </td>\r\n        );\r\n      }\r\n\r\n      const category = this.props.match.params.category;\r\n\r\n      return (\r\n        <tr key={post.id}>\r\n          <td>\r\n            <Link to={`/topics/${category}/${post.id}`}>{post.topic}</Link>\r\n          </td>\r\n          <td>{post.replyCount}</td>\r\n          <td>\r\n            {dateFns.format(new Date(post.createdAt), \"YYYY/MM/DD HH:mm:ss\")}\r\n            <br />\r\n            {post.username}\r\n          </td>\r\n          {lastReply}\r\n        </tr>\r\n      );\r\n    });\r\n\r\n    // 顯示搜尋主題的標籤。\r\n    let tagSearchTopic = null;\r\n\r\n    if (this.state.searchTopic) {\r\n      tagSearchTopic = (\r\n        <span className=\"tag is-medium\">\r\n          {this.state.searchTopic}\r\n          <button\r\n            className=\"delete is-small\"\r\n            onClick={event => this.deleteTagHandler()}\r\n          />\r\n        </span>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <nav className=\"level\">\r\n          <div className=\"level-left\">\r\n            <div className=\"level-item\">\r\n              <h1 className=\"title\">{this.props.location.state.title}</h1>\r\n            </div>\r\n          </div>\r\n          <div className=\"level-right\">\r\n            <div className=\"level-item\">\r\n              <div className=\"field has-addons\">\r\n                <div className=\"control\">\r\n                  <input\r\n                    className=\"input\"\r\n                    type=\"text\"\r\n                    value={this.state.inputSearchTopic}\r\n                    onChange={event =>\r\n                      this.inputSearchTopicChangeHandler(event.target.value)\r\n                    }\r\n                    onKeyPress={event =>\r\n                      this.inputSearchTopicKeyPressHandler(event)\r\n                    }\r\n                    placeholder=\"搜尋主題\"\r\n                  />\r\n                </div>\r\n                <div className=\"control\">\r\n                  <button\r\n                    className=\"button is-info\"\r\n                    onClick={event => this.searchHandler()}\r\n                  >\r\n                    搜尋\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </nav>\r\n        {tagSearchTopic}\r\n        <hr />\r\n        <table className=\"table is-bordered is-striped is-hoverable is-fullwidth\">\r\n          <thead>\r\n            <tr>\r\n              <th>主題</th>\r\n              <th>回覆數</th>\r\n              <th>作者</th>\r\n              <th>最新回覆</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{topics}</tbody>\r\n        </table>\r\n        <Pagination\r\n          key={this.state.paginationKey}\r\n          totalCount={this.state.totalCount}\r\n          findData={(offset, limit) => this.findPostsTopics(offset, limit)}\r\n        />\r\n        <br />\r\n        {createTopic}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    user: state.auth.user\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  null\r\n)(Topics);\r\n","import React, { Component } from \"react\";\r\nimport PostEditor from \"../components/PostEditor\";\r\nimport Pagination from \"../components/Pagination\";\r\nimport { connect } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport produce from \"immer\";\r\nimport dateFns from \"date-fns\";\r\n\r\n/**\r\n  討論串頁面。\r\n*/\r\nclass Topic extends Component {\r\n  state = {\r\n    posts: [], // 全部文章。\r\n    totalCount: 0, // 文章總數。\r\n    content: \"\", // 新增回覆內文。\r\n    paginationKey: Math.random(), // 用來觸發分頁重新 render 並查詢資料。\r\n    postOnUpdate: {\r\n      content: \"\"\r\n    }, // 修改的文章。\r\n    updatePostModalActivate: false, // 是否顯示修改文章對話框。\r\n    postOnDelete: {}, // 刪除的文章。\r\n    deletePostModalActivate: false // 是否顯示刪除文章對話框。\r\n  };\r\n\r\n  // 新增回覆內文。\r\n  contentChangeHandler(value) {\r\n    this.setState(\r\n      produce(draft => {\r\n        draft.content = value;\r\n      })\r\n    );\r\n  }\r\n\r\n  // 修改文章。\r\n  postOnUpdateChangeHandler(value) {\r\n    this.setState(\r\n      produce(draft => {\r\n        draft.postOnUpdate.content = value;\r\n      })\r\n    );\r\n  }\r\n\r\n  // 新增回覆。\r\n  createReplyHandler() {\r\n    console.log(\"props\", this.props);\r\n    console.log(\"state\", this.state);\r\n    axios\r\n      .post(`/api/topics/${this.props.match.params.category}`, {\r\n        userProfileId: this.props.user.id,\r\n        topic: this.state.posts[0].topic,\r\n        content: this.state.content,\r\n        replyPostId: parseInt(this.props.match.params.id, 10)\r\n      })\r\n      .then(response => {\r\n        console.log(\"create reply response\", response);\r\n        this.setState(\r\n          produce(draft => {\r\n            draft.content = \"\";\r\n            draft.paginationKey = Math.random();\r\n          })\r\n        );\r\n      });\r\n  }\r\n\r\n  // 開啟修改文章對話框。\r\n  openUpdatePostModal(post) {\r\n    this.setState(\r\n      produce(draft => {\r\n        draft.postOnUpdate = Object.assign({}, post);\r\n        draft.updatePostModalActivate = true;\r\n      })\r\n    );\r\n  }\r\n\r\n  // 關閉修改文章對話框。\r\n  closeUpdatePostModal() {\r\n    this.setState(\r\n      produce(draft => {\r\n        draft.postOnUpdate = { content: \"\" };\r\n        draft.updatePostModalActivate = false;\r\n      })\r\n    );\r\n  }\r\n\r\n  // 修改文章。\r\n  updatePostHandler() {\r\n    console.log(\"props\", this.props);\r\n    console.log(\"state\", this.state);\r\n    const category = this.props.match.params.category;\r\n    const postId = this.state.postOnUpdate.id;\r\n    axios\r\n      .put(`/api/topics/${category}/${postId}`, {\r\n        content: this.state.postOnUpdate.content\r\n      })\r\n      .then(response => {\r\n        console.log(\"update post response\", response);\r\n        const updatedPost = response.data.post;\r\n        this.setState(\r\n          produce(draft => {\r\n            const index = draft.posts.findIndex(\r\n              post => post.id === updatedPost.id\r\n            );\r\n            draft.posts[index] = Object.assign(draft.posts[index], updatedPost);\r\n            draft.postOnUpdate = { content: \"\" };\r\n            draft.updatePostModalActivate = false;\r\n          })\r\n        );\r\n      });\r\n  }\r\n\r\n  // 開啟刪除文章對話框。\r\n  openDeletePostModal(post) {\r\n    this.setState(\r\n      produce(draft => {\r\n        draft.postOnDelete = Object.assign({}, post);\r\n        draft.deletePostModalActivate = true;\r\n      })\r\n    );\r\n  }\r\n\r\n  // 關閉刪除文章對話框。\r\n  closeDeletePostModal() {\r\n    this.setState(\r\n      produce(draft => {\r\n        draft.postOnDelete = {};\r\n        draft.deletePostModalActivate = false;\r\n      })\r\n    );\r\n  }\r\n\r\n  // 刪除文章。\r\n  deletePostHandler() {\r\n    console.log(\"props\", this.props);\r\n    console.log(\"state\", this.state);\r\n    const category = this.props.match.params.category;\r\n    const postId = this.state.postOnDelete.id;\r\n    axios.delete(`/api/topics/${category}/${postId}`).then(response => {\r\n      console.log(\"delete post response\", response);\r\n      const deletedPost = response.data.post;\r\n      this.setState(\r\n        produce(draft => {\r\n          const index = draft.posts.findIndex(\r\n            post => post.id === deletedPost.id\r\n          );\r\n          draft.posts[index] = Object.assign(draft.posts[index], deletedPost);\r\n          draft.postOnDelete = {};\r\n          draft.deletePostModalActivate = false;\r\n        })\r\n      );\r\n    });\r\n  }\r\n\r\n  // 查詢此主題文章。\r\n  findPostsByTopicId(offset, limit) {\r\n    const category = this.props.match.params.category;\r\n    const id = this.props.match.params.id;\r\n    axios\r\n      .get(`/api/topics/${category}/${id}`, {\r\n        params: {\r\n          offset,\r\n          limit\r\n        }\r\n      })\r\n      .then(response => {\r\n        console.log(response);\r\n        this.setState(\r\n          produce(draft => {\r\n            draft.posts = response.data.posts;\r\n            draft.totalCount = response.data.totalCount;\r\n          })\r\n        );\r\n      });\r\n  }\r\n\r\n  goBackHandler() {\r\n    this.props.history.goBack();\r\n  }\r\n\r\n  render() {\r\n    let createReply = null;\r\n\r\n    if (this.props.user) {\r\n      createReply = (\r\n        <div className=\"box\">\r\n          <div className=\"field\">\r\n            <label className=\"label\">回覆</label>\r\n            <div className=\"control\">\r\n              <PostEditor\r\n                value={this.state.content}\r\n                changed={value => this.contentChangeHandler(value)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"field\">\r\n            <div className=\"control\">\r\n              <button\r\n                className=\"button is-primary\"\r\n                onClick={event => this.createReplyHandler()}\r\n              >\r\n                回覆\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const postId = parseInt(this.props.match.params.id, 10);\r\n    const posts = this.state.posts.map((post, index) => {\r\n      let updateButton = null;\r\n      let deleteButton = null;\r\n      const user = this.props.user;\r\n\r\n      // 只能修改自己的文章。\r\n      if (!post.deletedAt && user && post.username === user.username) {\r\n        updateButton = (\r\n          <button\r\n            className=\"button is-primary\"\r\n            onClick={event => this.openUpdatePostModal(post)}\r\n          >\r\n            修改\r\n          </button>\r\n        );\r\n      }\r\n\r\n      // 只能刪除自己的文章，而系統管理員可以刪除每個人的文章。\r\n      if (\r\n        !post.deletedAt &&\r\n        user &&\r\n        (post.username === user.username || user.role === \"admin\")\r\n      ) {\r\n        deleteButton = (\r\n          <button\r\n            className=\"button\"\r\n            onClick={event => this.openDeletePostModal(post)}\r\n          >\r\n            刪除\r\n          </button>\r\n        );\r\n      }\r\n\r\n      let content = null;\r\n      let postContent = post.content;\r\n\r\n      // 若文章已刪除。\r\n      if (post.deletedAt) {\r\n        // 刪除時間。\r\n        const deletedAt = dateFns.format(\r\n          new Date(post.deletedAt),\r\n          \"YYYY/MM/DD HH:mm:ss\"\r\n        );\r\n        postContent = deletedAt + \" - \" + postContent;\r\n      }\r\n\r\n      // 若是主題文章，顯示主題。\r\n      content = (\r\n        <td>\r\n          {post.id === postId ? (\r\n            <div>\r\n              <h1 className=\"title\">{post.topic}</h1>\r\n              <hr />\r\n            </div>\r\n          ) : null}\r\n          <div className=\"ql-snow\">\r\n            <div\r\n              className=\"ql-editor\"\r\n              dangerouslySetInnerHTML={{ __html: postContent }}\r\n            />\r\n          </div>\r\n          {updateButton}\r\n          {deleteButton}\r\n        </td>\r\n      );\r\n\r\n      // 新增時間。\r\n      const createdAt = dateFns.format(\r\n        new Date(post.createdAt),\r\n        \"YYYY/MM/DD HH:mm:ss\"\r\n      );\r\n\r\n      // 修改時間。\r\n      const updatedAt = dateFns.format(\r\n        new Date(post.updatedAt),\r\n        \"YYYY/MM/DD HH:mm:ss\"\r\n      );\r\n\r\n      return (\r\n        <tr key={post.id}>\r\n          <td>\r\n            <h6 className=\"title is-6\">{post.username}</h6>\r\n            <div className=\"is-size-7\">{createdAt + \" 新增\"}</div>\r\n            {updatedAt !== createdAt ? (\r\n              <div className=\"is-size-7\">{updatedAt + \" 修改\"}</div>\r\n            ) : null}\r\n            <br />\r\n          </td>\r\n          {content}\r\n        </tr>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <table className=\"table is-bordered is-striped is-fullwidth\">\r\n          <thead>\r\n            <tr>\r\n              <th width=\"170px\">作者</th>\r\n              <th>文章</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{posts}</tbody>\r\n        </table>\r\n        <Pagination\r\n          key={this.state.paginationKey}\r\n          totalCount={this.state.totalCount}\r\n          findData={(offset, limit) => this.findPostsByTopicId(offset, limit)}\r\n        />\r\n        <br />\r\n        <nav className=\"level\">\r\n          <div className=\"level-left\">\r\n            <div className=\"level-item\" />\r\n          </div>\r\n          <div className=\"level-right\">\r\n            <div className=\"level-item\">\r\n              <button\r\n                className=\"button\"\r\n                onClick={event => this.goBackHandler()}\r\n              >\r\n                回上一頁\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </nav>\r\n        {createReply}\r\n        <div\r\n          className={\r\n            this.state.updatePostModalActivate ? \"modal is-active\" : \"modal\"\r\n          }\r\n        >\r\n          <div className=\"modal-background\" />\r\n          <div className=\"modal-card\">\r\n            <header className=\"modal-card-head\">\r\n              <p className=\"modal-card-title\">修改文章</p>\r\n              <button\r\n                className=\"delete\"\r\n                aria-label=\"close\"\r\n                onClick={event => this.closeUpdatePostModal()}\r\n              />\r\n            </header>\r\n            <section className=\"modal-card-body\">\r\n              <PostEditor\r\n                value={\r\n                  this.state.postOnUpdate ? this.state.postOnUpdate.content : \"\"\r\n                }\r\n                changed={value => this.postOnUpdateChangeHandler(value)}\r\n              />\r\n            </section>\r\n            <footer className=\"modal-card-foot\">\r\n              <button\r\n                className=\"button is-primary\"\r\n                onClick={event => this.updatePostHandler()}\r\n              >\r\n                確定\r\n              </button>\r\n              <button\r\n                className=\"button\"\r\n                onClick={event => this.closeUpdatePostModal()}\r\n              >\r\n                取消\r\n              </button>\r\n            </footer>\r\n          </div>\r\n        </div>\r\n        <div\r\n          className={\r\n            this.state.deletePostModalActivate ? \"modal is-active\" : \"modal\"\r\n          }\r\n        >\r\n          <div className=\"modal-background\" />\r\n          <div className=\"modal-card\">\r\n            <header className=\"modal-card-head\">\r\n              <p className=\"modal-card-title\">刪除文章</p>\r\n              <button\r\n                className=\"delete\"\r\n                aria-label=\"close\"\r\n                onClick={event => this.closeDeletePostModal()}\r\n              />\r\n            </header>\r\n            <section className=\"modal-card-body\">確定刪除文章？</section>\r\n            <footer className=\"modal-card-foot\">\r\n              <button\r\n                className=\"button is-primary\"\r\n                onClick={event => this.deletePostHandler()}\r\n              >\r\n                確定\r\n              </button>\r\n              <button\r\n                className=\"button\"\r\n                onClick={event => this.closeDeletePostModal()}\r\n              >\r\n                取消\r\n              </button>\r\n            </footer>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    user: state.auth.user\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  null\r\n)(Topic);\r\n","import React, { Component } from \"react\";\r\nimport Pagination from \"../components/Pagination\";\r\nimport { connect } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport produce from \"immer\";\r\nimport dateFns from \"date-fns\";\r\n\r\n/**\r\n  系統管理員頁面，提供系統管理員停用使用者功能。\r\n*/\r\nclass Admin extends Component {\r\n  state = {\r\n    users: [], // 使用者列表。\r\n    totalCount: 0, // 主題總筆數。\r\n    inputSearchUser: \"\", // 搜尋輸入框輸入的值。\r\n    searchUser: \"\", // 請求參數：搜尋的使用者名稱。\r\n    paginationKey: Math.random(), // 用來觸發分頁重新 render 並查詢資料。\r\n    disableUserModalActivate: false, // 是否顯示停用使用者對話框。\r\n    disableUserId: null // 停用使用者的 id。\r\n  };\r\n\r\n  inputSearchUserChangeHandler(value) {\r\n    this.setState(\r\n      produce(draft => {\r\n        draft.inputSearchUser = value;\r\n      })\r\n    );\r\n  }\r\n\r\n  inputSearchUserKeyPressHandler(event) {\r\n    if (event.key !== \"Enter\") return;\r\n    this.searchHandler();\r\n  }\r\n\r\n  searchHandler() {\r\n    this.setState(\r\n      produce(draft => {\r\n        draft.searchUser = draft.inputSearchUser;\r\n        draft.inputSearchUser = \"\";\r\n        draft.paginationKey = Math.random(); // 觸發分頁重新查詢。\r\n      })\r\n    );\r\n  }\r\n\r\n  deleteTagHandler() {\r\n    this.setState(\r\n      produce(draft => {\r\n        draft.searchUser = \"\";\r\n        draft.paginationKey = Math.random(); // 觸發分頁重新查詢。\r\n      })\r\n    );\r\n  }\r\n\r\n  findUsers(offset, limit) {\r\n    axios\r\n      .get(\"/api/admin/users\", {\r\n        params: {\r\n          searchUser: this.state.searchUser,\r\n          offset,\r\n          limit\r\n        }\r\n      })\r\n      .then(response => {\r\n        this.setState(\r\n          produce(draft => {\r\n            draft.users = response.data.users;\r\n            draft.totalCount = response.data.totalCount;\r\n          })\r\n        );\r\n      });\r\n  }\r\n\r\n  // 開啟停用使用者對話框。\r\n  openDisableUserModal(id) {\r\n    this.setState(\r\n      produce(draft => {\r\n        draft.disableUserId = id;\r\n        draft.disableUserModalActivate = true;\r\n      })\r\n    );\r\n  }\r\n\r\n  // 關閉停用使用者對話框。\r\n  closeDisableUserModal() {\r\n    this.setState(\r\n      produce(draft => {\r\n        draft.disableUserId = null;\r\n        draft.disableUserModalActivate = false;\r\n      })\r\n    );\r\n  }\r\n\r\n  disableUserHandler() {\r\n    const id = this.state.disableUserId;\r\n    axios.post(`/api/admin/users/disable/${id}`).then(response => {\r\n      this.setState(\r\n        produce(draft => {\r\n          const index = draft.users.findIndex(user => user.id === id);\r\n          draft.users[index] = Object.assign(\r\n            draft.users[index],\r\n            response.data.user\r\n          );\r\n        })\r\n      );\r\n      this.closeDisableUserModal();\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const users = this.state.users.map((user, index) => {\r\n      return (\r\n        <tr key={user.id}>\r\n          <td>{user.username}</td>\r\n          <td>{user.email}</td>\r\n          <td>\r\n            {dateFns.format(new Date(user.createdAt), \"YYYY/MM/DD HH:mm:ss\")}\r\n          </td>\r\n          <td>\r\n            {user.isDisabled === 0 && user.id !== this.props.user.id ? (\r\n              <button\r\n                className=\"button is-primary\"\r\n                onClick={event => this.openDisableUserModal(user.id)}\r\n              >\r\n                停用\r\n              </button>\r\n            ) : null}\r\n          </td>\r\n        </tr>\r\n      );\r\n    });\r\n\r\n    // 顯示搜尋主題的標籤。\r\n    let tagSearchUser = null;\r\n\r\n    if (this.state.searchUser) {\r\n      tagSearchUser = (\r\n        <span className=\"tag is-medium\">\r\n          {this.state.searchUser}\r\n          <button\r\n            className=\"delete is-small\"\r\n            onClick={event => this.deleteTagHandler()}\r\n          />\r\n        </span>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <nav className=\"level\">\r\n          <div className=\"level-left\">\r\n            <div className=\"level-item\">\r\n              <h1 className=\"title\">使用者管理</h1>\r\n            </div>\r\n          </div>\r\n          <div className=\"level-right\">\r\n            <div className=\"level-item\">\r\n              <div className=\"field has-addons\">\r\n                <div className=\"control\">\r\n                  <input\r\n                    className=\"input\"\r\n                    type=\"text\"\r\n                    value={this.state.inputSearchUser}\r\n                    onChange={event =>\r\n                      this.inputSearchUserChangeHandler(event.target.value)\r\n                    }\r\n                    onKeyPress={event =>\r\n                      this.inputSearchUserKeyPressHandler(event)\r\n                    }\r\n                    placeholder=\"搜尋使用者名稱\"\r\n                  />\r\n                </div>\r\n                <div className=\"control\">\r\n                  <button\r\n                    className=\"button is-info\"\r\n                    onClick={event => this.searchHandler()}\r\n                  >\r\n                    搜尋\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </nav>\r\n        {tagSearchUser}\r\n        <hr />\r\n        <table className=\"table is-bordered is-striped is-hoverable is-fullwidth\">\r\n          <thead>\r\n            <tr>\r\n              <th>使用者名稱</th>\r\n              <th>Email</th>\r\n              <th>建立時間</th>\r\n              <th>操作</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{users}</tbody>\r\n        </table>\r\n        <Pagination\r\n          key={this.state.paginationKey}\r\n          totalCount={this.state.totalCount}\r\n          findData={(offset, limit) => this.findUsers(offset, limit)}\r\n        />\r\n        <div\r\n          className={\r\n            this.state.disableUserModalActivate ? \"modal is-active\" : \"modal\"\r\n          }\r\n        >\r\n          <div className=\"modal-background\" />\r\n          <div className=\"modal-card\">\r\n            <header className=\"modal-card-head\">\r\n              <p className=\"modal-card-title\">停用使用者</p>\r\n              <button\r\n                className=\"delete\"\r\n                aria-label=\"close\"\r\n                onClick={event => this.closeDisableUserModal()}\r\n              />\r\n            </header>\r\n            <section className=\"modal-card-body\">確定停用使用者？</section>\r\n            <footer className=\"modal-card-foot\">\r\n              <button\r\n                className=\"button is-primary\"\r\n                onClick={event => this.disableUserHandler()}\r\n              >\r\n                確定\r\n              </button>\r\n              <button\r\n                className=\"button\"\r\n                onClick={event => this.closeDisableUserModal()}\r\n              >\r\n                取消\r\n              </button>\r\n            </footer>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    user: state.auth.user\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  null\r\n)(Admin);\r\n","import produce from \"immer\";\r\nimport _ from \"lodash\";\r\n\r\n// Action Types\r\nexport const SHOW = \"forum/message/SHOW\";\r\nexport const DELETE = \"forum/message/DELETE\";\r\n\r\n// Reducer\r\nexport default function reducer(state = { list: [] }, action = {}) {\r\n  return produce(state, draft => {\r\n    switch (action.type) {\r\n      case SHOW:\r\n        draft.list.push(action.message);\r\n        break;\r\n      case DELETE:\r\n        _.remove(draft.list, message => {\r\n          return message.id === action.id;\r\n        });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  });\r\n}\r\n\r\n// Action Creators\r\nexport function showMessage(id, isError, text) {\r\n  return {\r\n    type: SHOW,\r\n    message: {\r\n      id,\r\n      isError,\r\n      text\r\n    }\r\n  };\r\n}\r\n\r\nexport function deleteMessage(id) {\r\n  return {\r\n    type: DELETE,\r\n    id\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport classes from \"./spinner.module.css\";\r\n\r\nclass Spinner extends Component {\r\n  render() {\r\n    return (\r\n      <div className={this.props.loading ? \"modal is-active\" : \"modal\"}>\r\n        <div className=\"modal-background\" />\r\n        <div\r\n          className=\"modal-content has-text-centered\"\r\n          style={{ height: \"100px\", width: \"100px\" }}\r\n        >\r\n          <div className={classes.LdsRoller}>\r\n            <div />\r\n            <div />\r\n            <div />\r\n            <div />\r\n            <div />\r\n            <div />\r\n            <div />\r\n            <div />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    loading: state.load.loading\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  null\r\n)(Spinner);\r\n","import React, { Component } from \"react\";\r\nimport { Link, Route, Switch, Redirect, withRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport Register from \"./pages/Register\";\r\nimport Login from \"./pages/Login\";\r\nimport Home from \"./pages/Home\";\r\nimport Topics from \"./pages/Topics\";\r\nimport Topic from \"./pages/Topic\";\r\nimport Admin from \"./pages/Admin\";\r\nimport * as authActions from \"./modules/auth\";\r\nimport * as messageActions from \"./modules/message\";\r\nimport \"./App.css\";\r\nimport logo from \"./assets/logo.png\";\r\nimport Spinner from \"./components/spinner/Spinner\";\r\n\r\n/**\r\n  主程式。\r\n*/\r\nclass App extends Component {\r\n  componentDidMount() {\r\n    // 檢查是否登入過，若有就自動登入。\r\n    this.props.onTryAutoLogin();\r\n  }\r\n\r\n  deleteMessageHandler(id) {\r\n    this.props.onDeleteMessage(id);\r\n  }\r\n\r\n  logoutHandler() {\r\n    this.props.onLogout();\r\n    this.props.history.replace(\"/\");\r\n  }\r\n\r\n  render() {\r\n    // 檢查有無訊息，若有就顯示。\r\n    let notifications = [];\r\n    const messageList = this.props.messageList;\r\n\r\n    if (messageList && messageList.length > 0) {\r\n      for (const message of messageList) {\r\n        const { id, isError, text } = message;\r\n        const classes = [\"notification\"];\r\n\r\n        if (isError) {\r\n          classes.push(\"is-danger\");\r\n        } else {\r\n          classes.push(\"is-primary\");\r\n        }\r\n\r\n        notifications.push(\r\n          <div key={id} className={classes.join(\" \")}>\r\n            <button\r\n              className=\"delete\"\r\n              onClick={event => this.deleteMessageHandler(id)}\r\n            />\r\n            {text}\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n\r\n    let username = null;\r\n    let buttons = null;\r\n\r\n    if (this.props.user) {\r\n      username = <div className=\"navbar-item\">{this.props.user.username}</div>;\r\n      buttons = (\r\n        <div className=\"buttons\">\r\n          <button\r\n            className=\"button is-light\"\r\n            onClick={event => this.logoutHandler(event)}\r\n          >\r\n            登出\r\n          </button>\r\n        </div>\r\n      );\r\n    } else {\r\n      buttons = (\r\n        <div className=\"buttons\">\r\n          <Link to=\"/register\" className=\"button is-primary\">\r\n            註冊\r\n          </Link>\r\n          <Link to=\"/login\" className=\"button is-light\">\r\n            登入\r\n          </Link>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <Spinner />\r\n        <nav className=\"navbar\" role=\"navigation\" aria-label=\"main navigation\">\r\n          <div className=\"navbar-brand\">\r\n            <Link to=\"/\" className=\"navbar-item\">\r\n              <img\r\n                alt=\"logo\"\r\n                src={logo}\r\n                style={{ width: \"100px\", maxHeight: \"52px\" }}\r\n              />\r\n            </Link>\r\n          </div>\r\n\r\n          <div id=\"navbarBasicExample\" className=\"navbar-menu is-active\">\r\n            <div className=\"navbar-start\">\r\n              <Link to=\"/\" className=\"navbar-item\">\r\n                Home\r\n              </Link>\r\n              {this.props.user && this.props.user.role === \"admin\" ? (\r\n                <Link to=\"/admin\" className=\"navbar-item\">\r\n                  Admin\r\n                </Link>\r\n              ) : null}\r\n            </div>\r\n            <div className=\"navbar-end\">\r\n              {username}\r\n              <div className=\"navbar-item\">{buttons}</div>\r\n            </div>\r\n          </div>\r\n        </nav>\r\n\r\n        {notifications}\r\n\r\n        <br />\r\n        <div className=\"columns\">\r\n          <div className=\"column is-12\">\r\n            <Switch>\r\n              <Route path=\"/register\" component={Register} />\r\n              <Route path=\"/login\" component={Login} />\r\n              <Route path=\"/topics/:category/:id\" component={Topic} />\r\n              <Route path=\"/topics/:category\" component={Topics} />\r\n              {this.props.user && this.props.user.role === \"admin\" ? (\r\n                <Route path=\"/admin\" component={Admin} />\r\n              ) : null}\r\n              <Route path=\"/\" exact component={Home} />\r\n              <Redirect to=\"/\" />\r\n            </Switch>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    messageList: state.message.list,\r\n    user: state.auth.user\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onTryAutoLogin: () => dispatch(authActions.authCheckState()),\r\n    onDeleteMessage: id => dispatch(messageActions.deleteMessage(id)),\r\n    onLogout: () => dispatch(authActions.logout())\r\n  };\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(App)\r\n);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import produce from \"immer\";\r\n\r\n// Action Types\r\nexport const START = \"forum/load/START\";\r\nexport const STOP = \"forum/load/STOP\";\r\n\r\n// Reducer\r\nexport default function reducer(\r\n  state = { ajaxCount: 0, loading: false },\r\n  action = {}\r\n) {\r\n  return produce(state, draft => {\r\n    switch (action.type) {\r\n      case START:\r\n        draft.ajaxCount++;\r\n        break;\r\n      case STOP:\r\n        draft.ajaxCount--;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    draft.loading = draft.ajaxCount > 0;\r\n  });\r\n}\r\n\r\n// Action Creators\r\nexport function startLoad() {\r\n  return {\r\n    type: START\r\n  };\r\n}\r\n\r\nexport function stopLoad() {\r\n  return {\r\n    type: STOP\r\n  };\r\n}\r\n","import { createStore, applyMiddleware, compose, combineReducers } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport auth from \"./modules/auth\";\r\nimport load from \"./modules/load\";\r\nimport message from \"./modules/message\";\r\n\r\n// 啟用 redux devTools chrome 擴充套件。\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst rootReducer = combineReducers({\r\n  auth,\r\n  load,\r\n  message\r\n});\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeEnhancers(applyMiddleware(thunk))\r\n);\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Router } from \"react-router-dom\";\r\nimport history from \"./utils/history\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport store from \"./store\";\r\nimport { Provider } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport { startLoad, stopLoad } from \"./modules/load\";\r\nimport { showMessage } from \"./modules/message\";\r\nimport \"bulma/css/bulma.css\";\r\nimport * as authActions from \"./modules/auth\";\r\n\r\n// 初始化 axios。\r\naxios.interceptors.request.use(\r\n  config => {\r\n    // Do something before request is sent\r\n    store.dispatch(startLoad());\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n    if (user) {\r\n      config.headers = { Authorization: \"Bearer \" + user.token };\r\n    }\r\n\r\n    return config;\r\n  },\r\n  error => {\r\n    // Do something with request error\r\n    // 顯示錯誤訊息。\r\n    store.dispatch(showMessage(Date.now(), true, error.toString()));\r\n    store.dispatch(stopLoad());\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\naxios.interceptors.response.use(\r\n  response => {\r\n    // Do something with response data\r\n    console.log(\"interceptor response\", response);\r\n    store.dispatch(stopLoad());\r\n\r\n    // 顯示訊息。\r\n    if (response.data && response.data.message) {\r\n      store.dispatch(showMessage(Date.now(), false, response.data.message));\r\n    }\r\n\r\n    return response;\r\n  },\r\n  error => {\r\n    // Do something with response error\r\n    console.log(\"interceptor error.response\", error.response);\r\n    store.dispatch(stopLoad());\r\n\r\n    // 若 JWT 過期。\r\n    if (error.response.status === 401 && localStorage.getItem(\"user\")) {\r\n      store.dispatch(authActions.logout());\r\n      store.dispatch(\r\n        showMessage(Date.now(), true, \"登入時效已過期，請重新登入。\")\r\n      );\r\n    } else {\r\n      // 顯示錯誤訊息。\r\n      const text =\r\n        error.response.data && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.toString();\r\n      store.dispatch(showMessage(Date.now(), true, text));\r\n    }\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nconst app = (\r\n  <Provider store={store}>\r\n    <Router history={history}>\r\n      <App />\r\n    </Router>\r\n  </Provider>\r\n);\r\n\r\nReactDOM.render(app, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}
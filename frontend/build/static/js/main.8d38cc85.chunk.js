(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,t){e.exports="data:image/png;base64,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"},139:function(e,t,a){e.exports={LdsRoller:"spinner_LdsRoller__2l220"}},143:function(e,t,a){e.exports=a(384)},148:function(e,t,a){},379:function(e,t,a){},384:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(70),r=a.n(s),c=a(389),o=a(18),i=Object(o.a)({}),u=(a(148),a(4)),m=a(5),d=a(7),p=a(6),h=a(8),f=a(386),E=a(391),v=a(387),b=a(388),g=a(390),N=a(12),y=a(385),k=a(3),C=a(9),O=a.n(C),M=a(72),j=a.n(M),H="forum/auth/AUTH_SUCCESS",S="forum/auth/AUTH_LOGOUT";function A(e){return localStorage.setItem("user",JSON.stringify(e)),{type:H,user:e}}function D(){return localStorage.clear(),i.replace("/"),{type:S}}function U(e){var t=e.data.userProfile;return t.expDate=new Date(1e3*e.data.exp),console.log("expDate",j()(t.expDate,"YYYY/MM/DD HH:mm:ss")),t.token=e.data.token,t}var w=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={username:"",email:"",password:""},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"usernameChangeHandler",value:function(e){this.setState({username:e.target.value})}},{key:"emailChangeHandler",value:function(e){this.setState({email:e.target.value})}},{key:"passwordChangeHandler",value:function(e){this.setState({password:e.target.value})}},{key:"passwordKeyPressHandler",value:function(e){"Enter"===e.key&&this.registerHandler(e)}},{key:"registerHandler",value:function(e){e.preventDefault(),this.props.onRegister(this.state.username,this.state.email,this.state.password)}},{key:"render",value:function(){var e=this;return this.props.user?l.a.createElement(y.a,{to:"/"}):l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column is-4"}),l.a.createElement("div",{className:"column is-4"},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u4f7f\u7528\u8005\u540d\u7a31"),l.a.createElement("p",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"text",placeholder:"\u4f7f\u7528\u8005\u540d\u7a31",value:this.state.username,onChange:function(t){return e.usernameChangeHandler(t)}}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fas fa-user"})))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Email"),l.a.createElement("p",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"email",placeholder:"Email",value:this.state.email,onChange:function(t){return e.emailChangeHandler(t)}}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-envelope"})))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u5bc6\u78bc"),l.a.createElement("p",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"password",placeholder:"\u5bc6\u78bc",value:this.state.password,onChange:function(t){return e.passwordChangeHandler(t)},onKeyPress:function(t){return e.passwordKeyPressHandler(t)}}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-lock"})))),l.a.createElement("div",{className:"field"},l.a.createElement("p",{className:"control"},l.a.createElement("button",{className:"button is-success",onClick:function(t){return e.registerHandler(t)}},"\u8a3b\u518a")))),l.a.createElement("div",{className:"column is-4"}))}}]),t}(n.Component),P=Object(N.b)(function(e){return{user:e.auth.user}},function(e){return{onRegister:function(t,a,n){return e(function(e,t,a){return function(n){O.a.post("/api/auth/register",{username:e,email:t,password:a}).then(function(e){n(A(U(e)))})}}(t,a,n))}}})(w),Y=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={email:"",password:""},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"emailChangeHandler",value:function(e){this.setState({email:e.target.value})}},{key:"passwordChangeHandler",value:function(e){this.setState({password:e.target.value})}},{key:"passwordKeyPressHandler",value:function(e){"Enter"===e.key&&this.loginHandler(e)}},{key:"loginHandler",value:function(e){e.preventDefault(),this.props.onLogin(this.state.email,this.state.password)}},{key:"render",value:function(){var e=this;return this.props.user?l.a.createElement(y.a,{to:"/"}):l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column is-4"}),l.a.createElement("div",{className:"column is-4"},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Email"),l.a.createElement("p",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"email",placeholder:"Email",value:this.state.email,onChange:function(t){return e.emailChangeHandler(t)}}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-envelope"})))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u5bc6\u78bc"),l.a.createElement("p",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"password",placeholder:"\u5bc6\u78bc",value:this.state.password,onChange:function(t){return e.passwordChangeHandler(t)},onKeyPress:function(t){return e.passwordKeyPressHandler(t)}}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-lock"})))),l.a.createElement("div",{className:"field"},l.a.createElement("p",{className:"control"},l.a.createElement("button",{className:"button is-success",onClick:function(t){return e.loginHandler(t)}},"\u767b\u5165")))),l.a.createElement("div",{className:"column is-4"}))}}]),t}(n.Component),T=Object(N.b)(function(e){return{user:e.auth.user}},function(e){return{onLogin:function(t,a){return e(function(e,t){return function(a){O.a.post("/api/auth/login",{email:e,password:t}).then(function(e){a(A(U(e)))})}}(t,a))}}})(Y),R=a(15),x=a.n(R),J=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={topicCount:0,replyCount:0,userCount:0},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.a.get("/api/forum/statistics").then(function(t){var a=t.data.forumStatistics;e.setState(Object(k.a)(function(e){e.topicCount=a.topicCount,e.replyCount=a.replyCount,e.userCount=a.userCount}))})}},{key:"render",value:function(){return l.a.createElement("div",{className:"card"},l.a.createElement("header",{className:"card-header"},l.a.createElement("p",{className:"card-header-title"},"\u8ad6\u58c7\u7d71\u8a08\u8cc7\u6599")),l.a.createElement("div",{className:"card-content"},l.a.createElement("div",{className:"level"},l.a.createElement("div",{className:"level-item has-text-centered"},l.a.createElement("div",null,l.a.createElement("p",{className:"heading"},"\u4e3b\u984c\u7e3d\u6578"),l.a.createElement("p",{className:"title"},this.state.topicCount))),l.a.createElement("div",{className:"level-item has-text-centered"},l.a.createElement("div",null,l.a.createElement("p",{className:"heading"},"\u56de\u8986\u7e3d\u6578"),l.a.createElement("p",{className:"title"},this.state.replyCount))),l.a.createElement("div",{className:"level-item has-text-centered"},l.a.createElement("div",null,l.a.createElement("p",{className:"heading"},"\u4f7f\u7528\u8005\u7e3d\u6578"),l.a.createElement("p",{className:"title"},this.state.userCount))))))}}]),t}(n.Component),L=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={golang:{totalCount:0,replyCount:0,lastPostUsername:null,lastPostTime:null},nodeJS:{totalCount:0,replyCount:0,lastPostUsername:null,lastPostTime:null}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.a.get("/api/topics/statistics").then(function(t){e.setState(Object(k.a)(function(e){e.golang=t.data.golang,e.nodeJS=t.data.nodeJS}))})}},{key:"render",value:function(){var e=this.state.golang,t=null;e.lastPostTime&&(t=l.a.createElement("div",null,x.a.format(new Date(e.lastPostTime),"YYYY/MM/DD HH:mm:ss"),l.a.createElement("br",null),e.lastPostUsername));var a=this.state.nodeJS,n=null;return a.lastPostTime&&(n=l.a.createElement("div",null,x.a.format(new Date(a.lastPostTime),"YYYY/MM/DD HH:mm:ss"),l.a.createElement("br",null),a.lastPostUsername)),l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column is-9"},l.a.createElement("table",{className:"table is-bordered is-striped is-hoverable is-fullwidth"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u5206\u985e"),l.a.createElement("th",null,"\u4e3b\u984c\u6578"),l.a.createElement("th",null,"\u56de\u8986\u6578"),l.a.createElement("th",null,"\u6700\u65b0\u767c\u6587"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(f.a,{to:{pathname:"/topics/golang",state:{title:"Golang"}}},"Golang")),l.a.createElement("td",null,e.topicCount),l.a.createElement("td",null,e.replyCount),l.a.createElement("td",null,t)),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(f.a,{to:{pathname:"/topics/nodejs",state:{title:"Node.js"}}},"Node.js")),l.a.createElement("td",null,a.topicCount),l.a.createElement("td",null,a.replyCount),l.a.createElement("td",null,n))))),l.a.createElement("div",{className:"column is-3"},l.a.createElement(J,null)))}}]),t}(n.Component),I=a(136),Q=a.n(I),W=(a(377),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).quillRef=l.a.createRef(),a.modules={toolbar:{container:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["image"],["clean"]],handlers:{image:function(e,t){var n=a.quillRef.current.getEditor().getSelection(),l=prompt("\u8acb\u8f38\u5165\u5716\u7247\u7db2\u5740\u3002");l&&a.quillRef.current.getEditor().insertEmbed(n.index,"image",l,"user")}}}},a.formats=["header","bold","italic","underline","strike","blockquote","code-block","list","bullet","indent","image"],a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"changeHandler",value:function(e){this.props.changed(e)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{style:{marginBottom:"10px"}},l.a.createElement(Q.a,Object.assign({},this.props,{ref:this.quillRef,theme:"snow",value:this.props.value,modules:this.modules,formats:this.formats,onChange:function(t){return e.changeHandler(t)}})))}}]),t}(n.Component)),K=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={currentPage:1,limit:10},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.findData(this.getOffset(),this.state.limit)}},{key:"getOffset",value:function(){return(this.state.currentPage-1)*this.state.limit}},{key:"pageClickHandler",value:function(e){var t=this;this.setState(Object(k.a)(function(t){t.currentPage=e}),function(){t.props.findData(t.getOffset(),t.state.limit)})}},{key:"render",value:function(){var e=this,t=this.state.currentPage,a=this.props.totalCount,n=Math.ceil(a/this.state.limit)||1;console.log("currentPage: {}, totalCount: {}, maxPage: {}",t,a,n);var s=[];1===t?s.push(l.a.createElement("li",{key:1},l.a.createElement("a",{className:"pagination-link is-current","aria-label":"Page 1","aria-current":"page",onClick:function(){return e.pageClickHandler(1)}},"1"))):s.push(l.a.createElement("li",{key:1},l.a.createElement("a",{className:"pagination-link","aria-label":"Goto page 1",onClick:function(){return e.pageClickHandler(1)}},"1"))),t-3>1&&s.push(l.a.createElement("li",{key:"ellipsis1"},l.a.createElement("span",{className:"pagination-ellipsis"},"\u2026")));for(var r=function(a){if(a===t)return s.push(l.a.createElement("li",{key:a},l.a.createElement("a",{className:"pagination-link is-current","aria-label":"Page ".concat(a),"aria-current":"page",onClick:function(){return e.pageClickHandler(a)}},a))),"continue";s.push(l.a.createElement("li",{key:a},l.a.createElement("a",{className:"pagination-link","aria-label":"Goto page ".concat(a),onClick:function(){return e.pageClickHandler(a)}},a)))},c=Math.max(t-2,2);c<=Math.min(t+2,n);c++)r(c);return t+3<n&&s.push(l.a.createElement("li",{key:"ellipsis2"},l.a.createElement("span",{className:"pagination-ellipsis"},"\u2026"))),t+2<n&&s.push(l.a.createElement("li",{key:n},l.a.createElement("a",{className:"pagination-link","aria-label":"Goto page ".concat(n),onClick:function(){return e.pageClickHandler(n)}},n))),l.a.createElement("nav",{className:"pagination",role:"navigation","aria-label":"pagination"},l.a.createElement("button",{className:"button pagination-previous",disabled:1===t,onClick:function(){return e.pageClickHandler(t-1)}},"\u4e0a\u4e00\u9801"),l.a.createElement("button",{className:"button pagination-next",disabled:t===n,onClick:function(){return e.pageClickHandler(t+1)}},"\u4e0b\u4e00\u9801"),l.a.createElement("ul",{className:"pagination-list"},s))}}]),t}(n.Component),B=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={topic:"",content:"",topics:[],totalCount:0,inputSearchTopic:"",searchTopic:"",paginationKey:Math.random()},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"topicChangeHandler",value:function(e){var t=e.target.value;this.setState(Object(k.a)(function(e){e.topic=t}))}},{key:"contentChangeHandler",value:function(e){this.setState(Object(k.a)(function(t){t.content=e}))}},{key:"createTopicHandler",value:function(){var e=this;O.a.post("/api/topics/".concat(this.props.match.params.category),{userProfileId:this.props.user.id,topic:this.state.topic,content:this.state.content}).then(function(t){e.setState(Object(k.a)(function(e){e.topic="",e.content="",e.inputSearchTopic="",e.searchTopic="",e.paginationKey=Math.random()}))})}},{key:"inputSearchTopicChangeHandler",value:function(e){this.setState(Object(k.a)(function(t){t.inputSearchTopic=e}))}},{key:"inputSearchTopicKeyPressHandler",value:function(e){"Enter"===e.key&&this.searchHandler()}},{key:"searchHandler",value:function(){this.setState(Object(k.a)(function(e){e.searchTopic=e.inputSearchTopic,e.inputSearchTopic="",e.paginationKey=Math.random()}))}},{key:"deleteTagHandler",value:function(){this.setState(Object(k.a)(function(e){e.searchTopic="",e.paginationKey=Math.random()}))}},{key:"findPostsTopics",value:function(e,t){var a=this;O.a.get("/api/topics/".concat(this.props.match.params.category),{params:{searchTopic:this.state.searchTopic,offset:e,limit:t}}).then(function(e){a.setState(Object(k.a)(function(t){t.topics=e.data.topics,t.totalCount=e.data.totalCount}))})}},{key:"render",value:function(){var e=this,t=null;this.props.user&&(t=l.a.createElement("div",{className:"box"},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u4e3b\u984c"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{type:"text",className:"input",placeholder:"\u8acb\u8f38\u5165\u4e3b\u984c",value:this.state.topic,onChange:function(t){return e.topicChangeHandler(t)}}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u5167\u6587"),l.a.createElement("div",{className:"control"},l.a.createElement(W,{value:this.state.content,changed:function(t){return e.contentChangeHandler(t)}}))),l.a.createElement("div",{className:"field"},l.a.createElement("div",{className:"control"},l.a.createElement("button",{className:"button is-primary",onClick:function(t){return e.createTopicHandler()}},"\u65b0\u589e\u4e3b\u984c")))));var a=this.state.topics.map(function(t,a){var n=l.a.createElement("td",null);t.lastReplyUsername&&(n=l.a.createElement("td",null,x.a.format(new Date(t.lastReplyCreatedAt),"YYYY/MM/DD HH:mm:ss"),l.a.createElement("br",null),t.lastReplyUsername));var s=e.props.match.params.category;return l.a.createElement("tr",{key:t.id},l.a.createElement("td",null,l.a.createElement(f.a,{to:"/topics/".concat(s,"/").concat(t.id)},t.topic)),l.a.createElement("td",null,t.replyCount),l.a.createElement("td",null,x.a.format(new Date(t.createdAt),"YYYY/MM/DD HH:mm:ss"),l.a.createElement("br",null),t.username),n)}),n=null;return this.state.searchTopic&&(n=l.a.createElement("span",{className:"tag is-medium"},this.state.searchTopic,l.a.createElement("button",{className:"delete is-small",onClick:function(t){return e.deleteTagHandler()}}))),l.a.createElement("div",{className:"container"},l.a.createElement("nav",{className:"level"},l.a.createElement("div",{className:"level-left"},l.a.createElement("div",{className:"level-item"},l.a.createElement("h1",{className:"title"},this.props.location.state.title))),l.a.createElement("div",{className:"level-right"},l.a.createElement("div",{className:"level-item"},l.a.createElement("div",{className:"field has-addons"},l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"text",value:this.state.inputSearchTopic,onChange:function(t){return e.inputSearchTopicChangeHandler(t.target.value)},onKeyPress:function(t){return e.inputSearchTopicKeyPressHandler(t)},placeholder:"\u641c\u5c0b\u4e3b\u984c"})),l.a.createElement("div",{className:"control"},l.a.createElement("button",{className:"button is-info",onClick:function(t){return e.searchHandler()}},"\u641c\u5c0b")))))),n,l.a.createElement("hr",null),l.a.createElement("table",{className:"table is-bordered is-striped is-hoverable is-fullwidth"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u4e3b\u984c"),l.a.createElement("th",null,"\u56de\u8986\u6578"),l.a.createElement("th",null,"\u4f5c\u8005"),l.a.createElement("th",null,"\u6700\u65b0\u56de\u8986"))),l.a.createElement("tbody",null,a)),l.a.createElement(K,{key:this.state.paginationKey,totalCount:this.state.totalCount,findData:function(t,a){return e.findPostsTopics(t,a)}}),l.a.createElement("br",null),t)}}]),t}(n.Component),F=Object(N.b)(function(e){return{user:e.auth.user}},null)(B),q=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={posts:[],totalCount:0,content:"",paginationKey:Math.random(),postOnUpdate:{content:""},updatePostModalActivate:!1,postOnDelete:{},deletePostModalActivate:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"contentChangeHandler",value:function(e){this.setState(Object(k.a)(function(t){t.content=e}))}},{key:"postOnUpdateChangeHandler",value:function(e){this.setState(Object(k.a)(function(t){t.postOnUpdate.content=e}))}},{key:"createReplyHandler",value:function(){var e=this;console.log("props",this.props),console.log("state",this.state),O.a.post("/api/topics/".concat(this.props.match.params.category),{userProfileId:this.props.user.id,topic:this.state.posts[0].topic,content:this.state.content,replyPostId:parseInt(this.props.match.params.id,10)}).then(function(t){console.log("create reply response",t),e.setState(Object(k.a)(function(e){e.content="",e.paginationKey=Math.random()}))})}},{key:"openUpdatePostModal",value:function(e){this.setState(Object(k.a)(function(t){t.postOnUpdate=Object.assign({},e),t.updatePostModalActivate=!0}))}},{key:"closeUpdatePostModal",value:function(){this.setState(Object(k.a)(function(e){e.postOnUpdate={content:""},e.updatePostModalActivate=!1}))}},{key:"updatePostHandler",value:function(){var e=this;console.log("props",this.props),console.log("state",this.state);var t=this.props.match.params.category,a=this.state.postOnUpdate.id;O.a.put("/api/topics/".concat(t,"/").concat(a),{content:this.state.postOnUpdate.content}).then(function(t){console.log("update post response",t);var a=t.data.post;e.setState(Object(k.a)(function(e){var t=e.posts.findIndex(function(e){return e.id===a.id});e.posts[t]=Object.assign(e.posts[t],a),e.postOnUpdate={content:""},e.updatePostModalActivate=!1}))})}},{key:"openDeletePostModal",value:function(e){this.setState(Object(k.a)(function(t){t.postOnDelete=Object.assign({},e),t.deletePostModalActivate=!0}))}},{key:"closeDeletePostModal",value:function(){this.setState(Object(k.a)(function(e){e.postOnDelete={},e.deletePostModalActivate=!1}))}},{key:"deletePostHandler",value:function(){var e=this;console.log("props",this.props),console.log("state",this.state);var t=this.props.match.params.category,a=this.state.postOnDelete.id;O.a.delete("/api/topics/".concat(t,"/").concat(a)).then(function(t){console.log("delete post response",t);var a=t.data.post;e.setState(Object(k.a)(function(e){var t=e.posts.findIndex(function(e){return e.id===a.id});e.posts[t]=Object.assign(e.posts[t],a),e.postOnDelete={},e.deletePostModalActivate=!1}))})}},{key:"findPostsByTopicId",value:function(e,t){var a=this,n=this.props.match.params.category,l=this.props.match.params.id;O.a.get("/api/topics/".concat(n,"/").concat(l),{params:{offset:e,limit:t}}).then(function(e){console.log(e),a.setState(Object(k.a)(function(t){t.posts=e.data.posts,t.totalCount=e.data.totalCount}))})}},{key:"goBackHandler",value:function(){this.props.history.goBack()}},{key:"render",value:function(){var e=this,t=null;this.props.user&&(t=l.a.createElement("div",{className:"box"},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u56de\u8986"),l.a.createElement("div",{className:"control"},l.a.createElement(W,{value:this.state.content,changed:function(t){return e.contentChangeHandler(t)}}))),l.a.createElement("div",{className:"field"},l.a.createElement("div",{className:"control"},l.a.createElement("button",{className:"button is-primary",onClick:function(t){return e.createReplyHandler()}},"\u56de\u8986")))));var a=parseInt(this.props.match.params.id,10),n=this.state.posts.map(function(t,n){var s=null,r=null,c=e.props.user;!t.deletedAt&&c&&t.username===c.username&&(s=l.a.createElement("button",{className:"button is-primary",onClick:function(a){return e.openUpdatePostModal(t)}},"\u4fee\u6539")),t.deletedAt||!c||t.username!==c.username&&"admin"!==c.role||(r=l.a.createElement("button",{className:"button",onClick:function(a){return e.openDeletePostModal(t)}},"\u522a\u9664"));var o,i=t.content;t.deletedAt&&(i=x.a.format(new Date(t.deletedAt),"YYYY/MM/DD HH:mm:ss")+" - "+i);o=l.a.createElement("td",null,t.id===a?l.a.createElement("div",null,l.a.createElement("h1",{className:"title"},t.topic),l.a.createElement("hr",null)):null,l.a.createElement("div",{className:"ql-snow"},l.a.createElement("div",{className:"ql-editor",dangerouslySetInnerHTML:{__html:i}})),s,r);var u=x.a.format(new Date(t.createdAt),"YYYY/MM/DD HH:mm:ss"),m=x.a.format(new Date(t.updatedAt),"YYYY/MM/DD HH:mm:ss");return l.a.createElement("tr",{key:t.id},l.a.createElement("td",null,l.a.createElement("h6",{className:"title is-6"},t.username),l.a.createElement("div",{className:"is-size-7"},u+" \u65b0\u589e"),m!==u?l.a.createElement("div",{className:"is-size-7"},m+" \u4fee\u6539"):null,l.a.createElement("br",null)),o)});return l.a.createElement("div",{className:"container"},l.a.createElement("table",{className:"table is-bordered is-striped is-fullwidth"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"170px"},"\u4f5c\u8005"),l.a.createElement("th",null,"\u6587\u7ae0"))),l.a.createElement("tbody",null,n)),l.a.createElement(K,{key:this.state.paginationKey,totalCount:this.state.totalCount,findData:function(t,a){return e.findPostsByTopicId(t,a)}}),l.a.createElement("br",null),l.a.createElement("nav",{className:"level"},l.a.createElement("div",{className:"level-left"},l.a.createElement("div",{className:"level-item"})),l.a.createElement("div",{className:"level-right"},l.a.createElement("div",{className:"level-item"},l.a.createElement("button",{className:"button",onClick:function(t){return e.goBackHandler()}},"\u56de\u4e0a\u4e00\u9801")))),t,l.a.createElement("div",{className:this.state.updatePostModalActivate?"modal is-active":"modal"},l.a.createElement("div",{className:"modal-background"}),l.a.createElement("div",{className:"modal-card"},l.a.createElement("header",{className:"modal-card-head"},l.a.createElement("p",{className:"modal-card-title"},"\u4fee\u6539\u6587\u7ae0"),l.a.createElement("button",{className:"delete","aria-label":"close",onClick:function(t){return e.closeUpdatePostModal()}})),l.a.createElement("section",{className:"modal-card-body"},l.a.createElement(W,{value:this.state.postOnUpdate?this.state.postOnUpdate.content:"",changed:function(t){return e.postOnUpdateChangeHandler(t)}})),l.a.createElement("footer",{className:"modal-card-foot"},l.a.createElement("button",{className:"button is-primary",onClick:function(t){return e.updatePostHandler()}},"\u78ba\u5b9a"),l.a.createElement("button",{className:"button",onClick:function(t){return e.closeUpdatePostModal()}},"\u53d6\u6d88")))),l.a.createElement("div",{className:this.state.deletePostModalActivate?"modal is-active":"modal"},l.a.createElement("div",{className:"modal-background"}),l.a.createElement("div",{className:"modal-card"},l.a.createElement("header",{className:"modal-card-head"},l.a.createElement("p",{className:"modal-card-title"},"\u522a\u9664\u6587\u7ae0"),l.a.createElement("button",{className:"delete","aria-label":"close",onClick:function(t){return e.closeDeletePostModal()}})),l.a.createElement("section",{className:"modal-card-body"},"\u78ba\u5b9a\u522a\u9664\u6587\u7ae0\uff1f"),l.a.createElement("footer",{className:"modal-card-foot"},l.a.createElement("button",{className:"button is-primary",onClick:function(t){return e.deletePostHandler()}},"\u78ba\u5b9a"),l.a.createElement("button",{className:"button",onClick:function(t){return e.closeDeletePostModal()}},"\u53d6\u6d88")))))}}]),t}(n.Component),z=Object(N.b)(function(e){return{user:e.auth.user}},null)(q),G=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={users:[],totalCount:0,inputSearchUser:"",searchUser:"",paginationKey:Math.random(),disableUserModalActivate:!1,disableUserId:null},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"inputSearchUserChangeHandler",value:function(e){this.setState(Object(k.a)(function(t){t.inputSearchUser=e}))}},{key:"inputSearchUserKeyPressHandler",value:function(e){"Enter"===e.key&&this.searchHandler()}},{key:"searchHandler",value:function(){this.setState(Object(k.a)(function(e){e.searchUser=e.inputSearchUser,e.inputSearchUser="",e.paginationKey=Math.random()}))}},{key:"deleteTagHandler",value:function(){this.setState(Object(k.a)(function(e){e.searchUser="",e.paginationKey=Math.random()}))}},{key:"findUsers",value:function(e,t){var a=this;O.a.get("/api/admin/users",{params:{searchUser:this.state.searchUser,offset:e,limit:t}}).then(function(e){a.setState(Object(k.a)(function(t){t.users=e.data.users,t.totalCount=e.data.totalCount}))})}},{key:"openDisableUserModal",value:function(e){this.setState(Object(k.a)(function(t){t.disableUserId=e,t.disableUserModalActivate=!0}))}},{key:"closeDisableUserModal",value:function(){this.setState(Object(k.a)(function(e){e.disableUserId=null,e.disableUserModalActivate=!1}))}},{key:"disableUserHandler",value:function(){var e=this,t=this.state.disableUserId;O.a.post("/api/admin/users/disable/".concat(t)).then(function(a){e.setState(Object(k.a)(function(e){var n=e.users.findIndex(function(e){return e.id===t});e.users[n]=Object.assign(e.users[n],a.data.user)})),e.closeDisableUserModal()})}},{key:"render",value:function(){var e=this,t=this.state.users.map(function(t,a){return l.a.createElement("tr",{key:t.id},l.a.createElement("td",null,t.username),l.a.createElement("td",null,t.email),l.a.createElement("td",null,x.a.format(new Date(t.createdAt),"YYYY/MM/DD HH:mm:ss")),l.a.createElement("td",null,0===t.isDisabled&&t.id!==e.props.user.id?l.a.createElement("button",{className:"button is-primary",onClick:function(a){return e.openDisableUserModal(t.id)}},"\u505c\u7528"):null))}),a=null;return this.state.searchUser&&(a=l.a.createElement("span",{className:"tag is-medium"},this.state.searchUser,l.a.createElement("button",{className:"delete is-small",onClick:function(t){return e.deleteTagHandler()}}))),l.a.createElement("div",{className:"container"},l.a.createElement("nav",{className:"level"},l.a.createElement("div",{className:"level-left"},l.a.createElement("div",{className:"level-item"},l.a.createElement("h1",{className:"title"},"\u4f7f\u7528\u8005\u7ba1\u7406"))),l.a.createElement("div",{className:"level-right"},l.a.createElement("div",{className:"level-item"},l.a.createElement("div",{className:"field has-addons"},l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"text",value:this.state.inputSearchUser,onChange:function(t){return e.inputSearchUserChangeHandler(t.target.value)},onKeyPress:function(t){return e.inputSearchUserKeyPressHandler(t)},placeholder:"\u641c\u5c0b\u4f7f\u7528\u8005\u540d\u7a31"})),l.a.createElement("div",{className:"control"},l.a.createElement("button",{className:"button is-info",onClick:function(t){return e.searchHandler()}},"\u641c\u5c0b")))))),a,l.a.createElement("hr",null),l.a.createElement("table",{className:"table is-bordered is-striped is-hoverable is-fullwidth"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u4f7f\u7528\u8005\u540d\u7a31"),l.a.createElement("th",null,"Email"),l.a.createElement("th",null,"\u5efa\u7acb\u6642\u9593"),l.a.createElement("th",null,"\u64cd\u4f5c"))),l.a.createElement("tbody",null,t)),l.a.createElement(K,{key:this.state.paginationKey,totalCount:this.state.totalCount,findData:function(t,a){return e.findUsers(t,a)}}),l.a.createElement("div",{className:this.state.disableUserModalActivate?"modal is-active":"modal"},l.a.createElement("div",{className:"modal-background"}),l.a.createElement("div",{className:"modal-card"},l.a.createElement("header",{className:"modal-card-head"},l.a.createElement("p",{className:"modal-card-title"},"\u505c\u7528\u4f7f\u7528\u8005"),l.a.createElement("button",{className:"delete","aria-label":"close",onClick:function(t){return e.closeDisableUserModal()}})),l.a.createElement("section",{className:"modal-card-body"},"\u78ba\u5b9a\u505c\u7528\u4f7f\u7528\u8005\uff1f"),l.a.createElement("footer",{className:"modal-card-foot"},l.a.createElement("button",{className:"button is-primary",onClick:function(t){return e.disableUserHandler()}},"\u78ba\u5b9a"),l.a.createElement("button",{className:"button",onClick:function(t){return e.closeDisableUserModal()}},"\u53d6\u6d88")))))}}]),t}(n.Component),X=Object(N.b)(function(e){return{user:e.auth.user}},null)(G),V=a(137),Z=a.n(V),_="forum/message/SHOW",$="forum/message/DELETE";function ee(e,t,a){return{type:_,message:{id:e,isError:t,text:a}}}a(379);var te=a(138),ae=a.n(te),ne=a(139),le=a.n(ne),se=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:this.props.loading?"modal is-active":"modal"},l.a.createElement("div",{className:"modal-background"}),l.a.createElement("div",{className:"modal-content has-text-centered",style:{height:"100px",width:"100px"}},l.a.createElement("div",{className:le.a.LdsRoller},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null))))}}]),t}(n.Component),re=Object(N.b)(function(e){return{loading:e.load.loading}},null)(se),ce=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.onTryAutoLogin()}},{key:"deleteMessageHandler",value:function(e){this.props.onDeleteMessage(e)}},{key:"logoutHandler",value:function(){this.props.onLogout(),this.props.history.replace("/")}},{key:"render",value:function(){var e=this,t=[],a=this.props.messageList;if(a&&a.length>0){var n=!0,s=!1,r=void 0;try{for(var c,o=function(){var a=c.value,n=a.id,s=a.isError,r=a.text,o=["notification"];s?o.push("is-danger"):o.push("is-primary"),t.push(l.a.createElement("div",{key:n,className:o.join(" ")},l.a.createElement("button",{className:"delete",onClick:function(t){return e.deleteMessageHandler(n)}}),r))},i=a[Symbol.iterator]();!(n=(c=i.next()).done);n=!0)o()}catch(d){s=!0,r=d}finally{try{n||null==i.return||i.return()}finally{if(s)throw r}}}var u=null,m=null;return this.props.user?(u=l.a.createElement("div",{className:"navbar-item"},this.props.user.username),m=l.a.createElement("div",{className:"buttons"},l.a.createElement("button",{className:"button is-light",onClick:function(t){return e.logoutHandler(t)}},"\u767b\u51fa"))):m=l.a.createElement("div",{className:"buttons"},l.a.createElement(f.a,{to:"/register",className:"button is-primary"},"\u8a3b\u518a"),l.a.createElement(f.a,{to:"/login",className:"button is-light"},"\u767b\u5165")),l.a.createElement("div",null,l.a.createElement(re,null),l.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},l.a.createElement("div",{className:"navbar-brand"},l.a.createElement(f.a,{to:"/",className:"navbar-item"},l.a.createElement("img",{alt:"logo",src:ae.a,style:{width:"100px",maxHeight:"52px"}}))),l.a.createElement("div",{id:"navbarBasicExample",className:"navbar-menu is-active"},l.a.createElement("div",{className:"navbar-start"},l.a.createElement(f.a,{to:"/",className:"navbar-item"},"Home"),this.props.user&&"admin"===this.props.user.role?l.a.createElement(f.a,{to:"/admin",className:"navbar-item"},"Admin"):null),l.a.createElement("div",{className:"navbar-end"},u,l.a.createElement("div",{className:"navbar-item"},m)))),t,l.a.createElement("br",null),l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column is-12"},l.a.createElement(E.a,null,l.a.createElement(v.a,{path:"/register",component:P}),l.a.createElement(v.a,{path:"/login",component:T}),l.a.createElement(v.a,{path:"/topics/:category/:id",component:z}),l.a.createElement(v.a,{path:"/topics/:category",component:F}),this.props.user&&"admin"===this.props.user.role?l.a.createElement(v.a,{path:"/admin",component:X}):null,l.a.createElement(v.a,{path:"/",exact:!0,component:L}),l.a.createElement(b.a,{to:"/"})))))}}]),t}(n.Component),oe=Object(g.a)(Object(N.b)(function(e){return{messageList:e.message.list,user:e.auth.user}},function(e){return{onTryAutoLogin:function(){return e(function(e){var t=JSON.parse(localStorage.getItem("user"));!t||t.expDate<=new Date?e(D()):e(A(t))})},onDeleteMessage:function(t){return e(function(e){return{type:$,id:e}}(t))},onLogout:function(){return e(D())}}})(ce));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ie=a(22),ue=a(141),me="forum/load/START",de="forum/load/STOP";function pe(){return{type:de}}var he=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ie.d,fe=Object(ie.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return console.log("action in reducer",t),Object(k.a)(e,function(e){switch(t.type){case H:e.user=t.user;break;case S:delete e.user}})},load:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ajaxCount:0,loading:!1},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(k.a)(e,function(e){switch(t.type){case me:e.ajaxCount++;break;case de:e.ajaxCount--}e.loading=e.ajaxCount>0})},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[]},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(k.a)(e,function(e){switch(t.type){case _:e.list.push(t.message);break;case $:Z.a.remove(e.list,function(e){return e.id===t.id})}})}}),Ee=Object(ie.e)(fe,he(Object(ie.a)(ue.a)));a(382);O.a.interceptors.request.use(function(e){Ee.dispatch({type:me});var t=JSON.parse(localStorage.getItem("user"));return t&&(e.headers={Authorization:"Bearer "+t.token}),e},function(e){return Ee.dispatch(ee(Date.now(),!0,e.toString())),Ee.dispatch(pe()),Promise.reject(e)}),O.a.interceptors.response.use(function(e){return console.log("interceptor response",e),Ee.dispatch(pe()),e.data&&e.data.message&&Ee.dispatch(ee(Date.now(),!1,e.data.message)),e},function(e){if(console.log("interceptor error.response",e.response),Ee.dispatch(pe()),401===e.response.status&&localStorage.getItem("user"))Ee.dispatch(D()),Ee.dispatch(ee(Date.now(),!0,"\u767b\u5165\u6642\u6548\u5df2\u904e\u671f\uff0c\u8acb\u91cd\u65b0\u767b\u5165\u3002"));else{var t=e.response.data&&e.response.data.message?e.response.data.message:e.toString();Ee.dispatch(ee(Date.now(),!0,t))}return Promise.reject(e)});var ve=l.a.createElement(N.a,{store:Ee},l.a.createElement(c.a,{history:i},l.a.createElement(oe,null)));r.a.render(ve,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[143,2,1]]]);
//# sourceMappingURL=main.8d38cc85.chunk.js.map